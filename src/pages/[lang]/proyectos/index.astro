---
import { getCollection } from "astro:content";
import BaseLayout from "../../../layouts/BaseLayout.astro";

export async function getStaticPaths() {
    return [{ params: { lang: "es" } }, { params: { lang: "en" } }];
}

const { lang } = Astro.params;

const projects = await getCollection("proyectos");
---

<BaseLayout lang={lang} title={lang === "es" ? "Proyectos" : "Projects"}>
    <section class="max-w-6xl mx-auto px-6 py-16 mt-[50px]">
        <h1 class="text-4xl font-bold mb-10">
            {lang === "es" ? "Proyectos" : "Projects"}
        </h1>

        <div class="grid gap-10 sm:grid-cols-2 lg:grid-cols-3">
            {
                projects.map((project) => (
                    <a
                        href={`/${lang}/proyectos/${project.id}`}
                        class="block border rounded-xl p-6 hover:shadow-lg transition bg-white"
                    >
                        <img
                            src={project.data.cover}
                            alt={project.data.title}
                            class="rounded-lg mb-4 h-40 w-full object-cover"
                        />

                        <h2 class="text-xl font-semibold mb-2">
                            {project.data.title}
                        </h2>

                        <p class="text-gray-600 text-sm">
                            {project.data.description}
                        </p>
                    </a>
                ))
            }
        </div>
    </section>
</BaseLayout>