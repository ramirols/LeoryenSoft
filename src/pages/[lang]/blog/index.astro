---
import { getCollection } from "astro:content";
import BaseLayout from "../../../layouts/BaseLayout.astro";

type Lang = "es" | "en";

export async function getStaticPaths() {
    return [{ params: { lang: "es" } }, { params: { lang: "en" } }];
}

const { lang } = Astro.params as { lang: Lang };

const posts = await getCollection("blog");

/* i18n */
const i18n: Record<Lang, any> = {
    es: {
        title: "Blog sobre desarrollo web, SEO y negocios (2025)",
        seoTitle: "Blog de desarrollo web, SEO y negocios (2025) | LeoryenSoft",
    },
    en: {
        title: "Web Development, SEO & Business Blog (2025)",
        seoTitle: "Web Development, SEO & Business Blog (2025) | LeoryenSoft",
    },
};

const t = i18n[lang];
---

<BaseLayout title={t.seoTitle} lang={lang}>
    <section class="max-w-6xl mx-auto px-6 py-16 mt-[50px]">
        <h1 class="text-4xl font-bold text-gray-900 mb-10">
            {t.title}
        </h1>

        <div class="grid gap-10 sm:grid-cols-2 lg:grid-cols-3">
            {
                posts.map((post) => (
                    <a
                        href={`/${lang}/blog/${post.id}`}
                        class="block border rounded-xl p-6 hover:shadow-lg transition bg-white"
                    >
                        {post.data.cover && (
                            <img
                                src={post.data.cover}
                                alt={post.data.title}
                                class="rounded-lg mb-4 h-40 w-full object-cover"
                            />
                        )}

                        <h2 class="text-xl font-semibold mb-2">
                            {post.data.title}
                        </h2>

                        <p class="text-gray-600 text-sm mb-3">
                            {post.data.description}
                        </p>

                        <p class="text-gray-400 text-xs">
                            {post.data.date.toLocaleDateString(
                                lang === "es" ? "es-PE" : "en-US",
                            )}
                        </p>
                    </a>
                ))
            }
        </div>
    </section>
</BaseLayout>
