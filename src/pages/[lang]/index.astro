---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Hero from "../../components/Slider";
import Services from "../../components/Services.astro";
import ProyectosGrid from "../../components/ProyectosGrid.astro";
import TestimonialSlider from "../../components/TestimonialSlider.jsx";
import BlogCard from "../../components/BlogCard.astro";
import FAQ from "../../components/FAQ.astro";
import ContactForm from "../../components/ContactForm.astro";

import { getCollection } from "astro:content";

type Lang = "es" | "en";

export async function getStaticPaths() {
	return [{ params: { lang: "es" } }, { params: { lang: "en" } }];
}

const { lang } = Astro.params as { lang: Lang };

const posts = await getCollection("blog");
const latest = posts.slice(0, 3);

const servicios =
	lang === "es"
		? [
				{
					nombre: "Landing Page",
					descripcion: "Página web profesional para emprendedores",
					imagen: "",
				},
				{
					nombre: "Web Corporativa",
					descripcion: "Web empresarial optimizada para SEO",
					imagen: "",
				},
			]
		: [
				{
					nombre: "Landing Page",
					descripcion: "Professional landing page",
					imagen: "",
				},
				{
					nombre: "Corporate Website",
					descripcion: "SEO optimized corporate website",
					imagen: "",
				},
			];
---

<BaseLayout
	lang={lang}
	title={lang === "es"
		? "LeoryenSoft | Desarrollo de Software y Páginas Web"
		: "LeoryenSoft | Software & Web Development"}
	description={lang === "es"
		? "Desarrollo de software, páginas web y SEO"
		: "Custom software, websites and SEO"}
>
	<Hero lang={lang} client:load />
	<Services servicios={servicios} lang={lang} />
	<ProyectosGrid lang={lang} />
	<TestimonialSlider client:load lang={lang} />

	<section class="max-w-6xl mx-auto px-6 py-16">
		<h2 class="text-3xl font-bold mb-8">
			{lang === "es" ? "Últimos artículos" : "Latest articles"}
		</h2>

		<div class="grid gap-10 sm:grid-cols-2 lg:grid-cols-3">
			{latest.map((post) => <BlogCard post={post} lang={lang} />)}
		</div>
	</section>

	<FAQ lang={lang} />
	<ContactForm lang={lang} />
</BaseLayout>
