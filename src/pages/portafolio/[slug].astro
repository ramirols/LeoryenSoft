---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import { ArrowUpRight } from "lucide-astro";

export async function getStaticPaths() {
    const projects = await getCollection("portafolio");
    return projects.map((project) => ({
        params: { slug: project.id },
        props: { project },
    }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<BaseLayout title={project.data.title} description={project.data.description}>
    <article class="max-w-3xl mx-auto py-14 px-6 prose">
        <img
            src={project.data.cover}
            alt={project.data.title}
            class="rounded-xl mb-8"
        />

        <h1>{project.data.title}</h1>
        <p class="text-gray-500">{project.data.description}</p>

        <Content />

        {
            project.data.url && (
                <a
                    href={project.data.url}
                    target="_blank"
                    class="inline-flex items-center gap-2 mt-10 font-semibold text-primary"
                >
                    Visitar sitio
                    <ArrowUpRight class="w-5 h-5" />
                </a>
            )
        }
    </article>
</BaseLayout>