---
import { Laptop, Code, Boxes, Phone } from "lucide-astro";
import ServiceCard from "./ServiceCard.astro";
import { servicesData } from "../data/services";

interface Props {
    lang?: "es" | "en";
    onlyFeatured?: boolean;
}

const { lang = "es", onlyFeatured = false } = Astro.props;

const t = {
    es: {
        sectionTitle: "Planes y precios de nuestros servicios",
        sectionDesc:
            "Estos son nuestros servicios más contratados. Todos incluyen optimización SEO, alto rendimiento y soporte profesional.",
        badges: {
            starter: "Ideal para emprendedores",
            popular: "Más vendido",
            business: "Empresas",
        },
        prices: {
            starter: "$199 USD",
            popular: "$499 USD",
            premium: "Desde $999",
        },
        features: {
            responsive: "Diseño moderno y responsive",
            seoBasic: "SEO básico optimizado",
            seoAdvanced: "SEO avanzado",
            speed: "Velocidad optimizada",
            contact: "Formulario de contacto",
            custom: "Desarrollo personalizado",
            automation: "Automatizaciones",
            scale: "Escalabilidad",
            support: "Soporte prioritario",
            android: "Aplicaciones Android",
            ios: "Aplicaciones iOS",
            marketing: "Estrategias de marketing digital",
        },

        ctaStart: "Comenzar ahora",
        ctaAll: "Ver todos los servicios",
    },
    en: {
        sectionTitle: "Service plans & pricing",
        sectionDesc:
            "These are our most popular services. All include SEO optimization, high performance and professional support.",
        badges: {
            starter: "Perfect for startups",
            popular: "Best seller",
            business: "Businesses",
        },
        prices: {
            starter: "$199 USD",
            popular: "$499 USD",
            premium: "From $999",
        },
        features: {
            responsive: "Modern & responsive design",
            seoBasic: "Basic SEO optimization",
            seoAdvanced: "Advanced SEO",
            speed: "Optimized performance",
            contact: "Contact form",
            custom: "Custom development",
            automation: "Automations",
            scale: "Scalability",
            support: "Priority support",
            android: "Android applications",
            ios: "iOS applications",
            marketing: "Digital marketing strategies",
        },

        ctaStart: "Get started",
        ctaAll: "View all services",
    },
}[lang];

const plans = onlyFeatured
    ? servicesData[lang].filter((p) => p.featured)
    : servicesData[lang];

const serviceIcons = {
    laptop: Laptop,
    code: Code,
    boxes: Boxes,
    phone: Phone,
};
---

<section id="planes-precios" class="bg-white py-24">
    <div class="max-w-6xl mx-auto px-6">
        <header class="text-center mb-20">
            <h2 class="text-4xl font-extrabold text-gray-900">
                {t.sectionTitle}
            </h2>
            <p class="text-gray-600 mt-4 max-w-2xl mx-auto">
                {t.sectionDesc}
            </p>
        </header>

        <div class="grid gap-10 md:grid-cols-3">
            {
                plans.map((plan) => (
                    <ServiceCard
                        icon={serviceIcons[plan.icon]}
                        badge={
                            plan.badgeKey ? t.badges[plan.badgeKey] : undefined
                        }
                        title={plan.nombre}
                        price={plan.price}
                        highlight={plan.highlight}
                        features={plan.features.map((f) => ({
                            icon: f.icon,
                            text: t.features[f.textKey],
                        }))}
                        ctaText={
                            plan.cta.type === "contact" ? t.ctaStart : t.ctaAll
                        }
                        ctaHref={
                            plan.cta.type === "contact"
                                ? `/${lang}#contacto`
                                : `/${lang}/servicios`
                        }
                    />
                ))
            }
        </div>
    </div>
</section>
